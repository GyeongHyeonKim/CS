#### 데이터베이스가 무엇인가요?
---

- 데이터를 체계적으로 저장하고 관리하는 시스템

- 데이터는 주로 테이블, 파일, 객체 등의 형태로 저장

#### DBMS가 무엇인가요?
---

- Database Management System

DBMS는 데이터베이스를 관리하고 제어하는 소프트웨어

**기능**

- 데이터 저장 및 관리

저장,검색,수정,삭제 기능 제공
다중 사용자 지원

- 일관성 및 무결성 보장

데이터가 변경될 때 정확한 상태 유지
트랜잭션 관리 시스템을 통해 ACID 속성 보장

- 데이터베이스의 구조를 관리하는 스키마 관리

- 데이터의 무결성 유지를 위한 제약 조건 설정

- 보안 관리, 백업과 복원

#### 스토리지 엔진은 무슨 일을 하나요?
---

- 데이터를 어떻게 저장,검색,업데이트,삭제할지 결정하는 핵심 컴포넌트

데이터베이스의 물리적인 측면을 관리하는 역할을 담당

데이터의 조직,저장,검색 메커니즘을 정의

**기능**

- 데이터 저장

데이터를 디스크에 어떻게 저장할 지 결정
데이터의 구조,형식,압축 방법 등을 포함

- 데이터 검색

사용자의 쿼리에 응답하기 위해 필요한 데이터를 디스크에서 빠르게 검색할 수 있는 메커니즘을 제공

- 데이터 업데이트

데이터를 수정하거나 삭제할 때 안전하고 효과적인 방법을 제공

- 트랜잭션 관리

ACID 속성(Atomocity,Consistency,Isolation,Durability) 을 지원하기 위한 메커니즘을 제공

트랜잭션의 원자성,일관성,고립성,영구성을 보장하는데 필요

- 데이터 보호

시스템 충돌,전원 손실, 디스크 고장 등과 같은 장애 상황에서 데이터를 보호하는 메커니즘을 제공

- 영향

데이터베이스의 성능,신뢰성,요구사항

- 예시

MySQL 

InnoDB - 트랜잭션을 지원
MyISAM - 풀 텍스트 검색을 지원
Memory - 데이터를 메모리에 저장하여 빠른 읽기/쓰기 속도를 제공

### RDB와 NoSQL

#### RDB가 무엇인가요?
---

- 데이터를 테이블 형태로 저장하는 데이터베이스

데이터 간의 관계를 정의하여 무결성과 일관성 보장

- SQL을 사용해 데이터 관리

Structured Query Language

- 테이블 기반 데이터 모델

열을 속성, 행은 데이터 항목

테이블이 관계를 가질 수 있음 - ForeignKey를 통해 

연결하여 데이터를 정규화하고 중복을 최소화

- 고정된 스키마(Schema)

정해진 스키마에 따라 데이터 저장
데이터 구조가 고정됨

- ACID 트랜잭션

트랜잭션의 ACID 속성을 보장 -> 안정성과 무결성

#### NoSQL DB가 무엇인가요?
---

- 테이블이 아닌 다양한 형식으로 데이터를 저장가능한 데이터베이스

문서, 키-값,컬럼 패밀리,그래프 등

- 유연한 데이터 모델

구조가 고정되지 않아 유연함

관계보다는 데이터 자체의 저장과 검색 속도에 중점
데이터 구조가 빈번히 변경될 수 있는 앱에 적합

- 수평적 확장

여러 서버에 데이터를 분산 저장 가능 - 수평적 확장에 최적화

대규모 데이터에 적합 - 클러스터링으로 성능 확장

- BASE 속성

ACID 대신 BASE 속성을 따름

Basically Available
Soft State
Eventual Consistency

일관성보다 가용성과 성능 중시 - 최종 일관성 보장

#### BASE 원칙이 무엇인가요?
---

- NoSQL 데이터베이스가 일관성을 관리하는 방식

- ACID와 대조적으로 가용성과 성능을 중시하는 특성을 가진 **분산 시스템의 특성**

**Bascially Available**

- 언제나 기본적인 가용성을 유지

시스템 일부에 장애가 발생해도 전체 시스템 사용 보장

사용자는 항상 응답을 받을 수 있으나, 최신이 아닐 가능성이 존재한다

**Soft State**

- 데이터 상태가 일시적으로 불완전할 수 있다 
즉각적인 일관성이 보장되지 않는다

- 업데이트를 더 유연히 처리 가능

**Eventual Consistency**

- 모든 데이터가 업데이트가 일정 시간이 지나면 일관된 상태에 도달함

- 분산 노드에서 데이터가 동시에 일치하지 않더라도 시간이 지나면 일관된 상태가 됨

#### NoSQL에서만 수평적 확장이 가능한 이유는 무엇인가요?
---

- 수평적 확장

다수의 서버에 데이터를 분산하여 처리 능력을 높이는 것

단일 서버에서 처리할 수 있는 하드웨어 한계를 극복하기 위해 여러 서버에 데이터를 분산하여 처리 능력을 높이는 것

- 수직적 확장

단일 서버에서 하드웨어 리소스를 업그레이드하여 처리 성능을 높이는 것

단일 서버에서 처리할 수 있는 하드웨어 리소스 한계를 넘을 수 없음


**NoSQL**

- 분산 데이터 모델

데이터를 여러 서버(노드)에 분산하여 저장

NoSQL은 처음부터 분산 데이터 모델을 통한 수평적 확장을 염두에 두고 개발됨

- 스키마리스 구조

구조가 유연하기에 데이터 추가와 확장이 용이

- 최종 일관성

순간적 일관성을 포기하기에 수평적 확장 용이

**RDB**

- 일관성 유지를 위한 비용이 높음


#### RDB의 어떠한 특징 때문에 NoSQL에 비해 부하가 많이 갈 수 있을까요?
---

- Join 연산

관계가 복잡한 데이터들의 연산

CPU 및 메모리 부하

- ACID 트랜잭션 관리

다중 사용자가 동시에 데이터를 수정할 때 일관성 유지를 위한 Lock 비용

- 고정된 스키마 구조

테이블 업데이트 시 구조 변경 작업에 부하

- 정규화로 인한 성능 저하

데이터 중복을 줄이고 무결성을 높이기 위함

- 수직적 확장에 의존

수평이 아니라 수직적으로 확장해야 함

#### NoSQL은 Lock을 사용하지 않나요?
---

- 대부분은 병렬 처리와 분산 아키텍처를 활용하여 락을 최소화하거나 없애는 방법을 사용

- 분산 트랜잭션을 사용하여 일관성을 유지

CAP 이론을 따르는 일관성 모델을 제공

일관성 모델은 데이터 일관성과 가용성 사이의 trade-off 관계

- 락을 대체하는 다른 방법을 사용

문서(Document)데이터 베이스는 일반적으로 트랜잭션이 아닌 문서 레벨의 일관성을 유지

**CAP**

Consistency, Availability, Partition Tolerance의 약자

CAP 이론은 "적절한 응답 시간 내 세 가지 속성을 모두 만족시키는 분산 시스템을 구성할 수 없다"는 이론이다.

**가용성**

통신사가 있고 우리가 그 고객이라고 해보자. 통신사 고객센터는 언제든지 연락 가능하다. 고객은 필요한 정보를 고객센터를 통해 **언제든지** 알아낼 수 있다. 이것을 가용성이라고 한다.

가용성이란 모든 요청이 응답을 받을 수 있어야 한다는 것을 의미한다. 사용자기 읽기 작업을 하든 쓰기 작업을 하든, 심지어 작업이 실패했더라도 사용자는 응답을 받을 수 있어야 한다. 즉 시스템이 중단되는 일 없이 언제든지 사용 가능한 상태여야 한다. 가용성은 사용자가 데이터가 일관되지 않더라도 언제든지 접근할 수 있다는 것을 의미한다. 예를들어 스마트폰과 PC에서 은행앱을 사용할 때 서로 잔고가 일치하지 않더라도 잔고를 조회할 수 있어야 한다.

![](https://velog.velcdn.com/images/sujipark2009/post/4af03e21-a3d0-4da8-9780-1f400317e739/image.png)

**일관성**

이제 새로운 집으로 이사를 해서 집 주소를 변경해야 한다고 해보자. 고객센터에 전화를 걸면 상담원과 연결된다.

상담원은 집 주소를 변경한다. 전화를 끊고 난 뒤, 집 주소는 정확히 말했으나 잘못된 호수를 말했다는 사실을 깨닫고 다시 고객센터에 전화를 건다. 이번에는 다른 상담원과 연결이 됐으나 연결된 상담원 또한 정확히 변경된 내용을 알고있다. 두번째 통화에서 다른 상담원과 연결됐더라도, 첫번째 상담원과 **같은 정보를 공유**한다 이를 일관성이라고 한다.

일관성이란 사용자가 분산 데이터베이스 상의 어떤 노드와 통신하는 지 상관없이 같은 데이터를 조회할 수 있는 것을 의미한다. 조회한 데이터는 가장 최근에 쓰여진 데이터이다. 따라서 만약 하나의 노드에 쓰기 작업이 이루어졌다면, 이는 모든 복제본에 반영이 되어야 한다는 것이며, 이는 사용자가 어떤 노드와 통신하는 지와 상관없이 같은 데이터를 보여주게끔한다.
그러나 시스템이 모든 인스턴스에 변경 내용을 즉각 반영하는 것은 사실상 불가능에 가깝다. 따라서 일관성의 목표는 데이터의 동기화가 충분히 빨라 사용상의 문제가 없게끔 하는 것이다.
일관성은 금융이나 개인정보와 같이 모든 사용자가 일관성있는 데이터를 조회해야할 때 중요하다. 예를들어 금융 앱을 이용할 때 PC나 스마트폰, 태블릿 또는 어디에서 보든 지 같은 잔고를 확인할 수 있어야 한다.

![](https://velog.velcdn.com/images/sujipark2009/post/b829ef7b-6b28-43a3-b0bc-80cd79857195/image.png)

**분할 허용성, Partition tolerance**

집과 회사에 와이파이가 잘 설치되어 있고, 최근들어 밖으로 잘 나가지 않아 현재 사용 중인 요금제가 더 이상 나에게 맞지 않는다는 것을 알게 됐다. 요금제를 변경하기 위해 고객센터에 다시 전화를 걸었다. 고객센터에서는 센터 내 전산 문제 때문에 본사와 통신할 수 없다고 한다. 하지만 고객센터는 정상적으로 운영되며, 통신이 복구될 때까지 잠시 기다리거나 변경을 적용하되, 다른 상담원은 잠시동안 예전 정보를 알고 있을 수 있다고 한다. 이를 분할 허용성이라고 한다.

분할이란 노드 간 통신이 끊어지는 것을 의미한다. 즉 한 노드가 다른 노드와 통신할 수 없을 때 분할이 생겼다고 한다. 이는 네트워크 장애나 서버 장애 혹은 다른 이유로 인한 것일 수 있다.
분할 허용성이란 시스템 내 분할이 생겼을 때 시스템이 여전히 작동하는 것을 의미한다. 즉 한 노드가 다른 노드와 통신할 수 없을 때, 다른 복제 노드가 사용자 요청에 응답할 수 있어야 한다. 이는 데이터의 복제본을 여러 다른 노드에 저장하여 처리하는 것을 의미한다. 따라서 분할이 생기더라도 복제본으로 부터 데이터를 조회할 수 있다. 분할 허용성은 분산 데이터베이스 시스템에서 필수적이다.

![](https://velog.velcdn.com/images/sujipark2009/post/49fcd9c4-9540-4c13-a5a0-4b77f362373a/image.png)


CAP 이론이란 분산 데이터베이스 시스템은 분할이 생겼을 때 일관성과 가용성 중 하나를 희생해야 한다는 것을 의미한다. 분산 데이터베이스 시스템은 반드시 네트워크 장애나 여러 이유들로 인해 장애가 발생할 수 밖에 없다. 그러므로 분산 데이터베이스 시스템은 반드시 분할 허용성을 가지고 있어야 하며, 일관성과 가용성 중 하나를 선택해야만 한다.
예를 들어 두 노드로 이루어진 분산 시스템에서 분할이 생겼을 때 데이터의 일관성을 보장하기란 불가능하다. 그러므로 분할이 생겼더라도 정상적으로 요청을 처리해 일관성을 희생하고 가용성을 높이던지, 잠시 요청 처리를 중단하고 중단된 노드가 재실행될 때까지 기다려 가용성을 희생하고 일관성을 지키는 방법 중 하나를 선택해야 한다. 따라서 NoSQL 데이터베이스는 CP 시스템과 AP 시스템으로 분류된다. CA 시스템은 일반적으로 하나의 노드에서 동작하는 모놀리식 데이터베이스 시스템을 의미한다.

https://onduway.tistory.com/106 << 추가적인 내용

#### RDB와 NoSQL을 각각 언제 쓰면 좋을까요?
---

**RDB**

- 구조가 명확하고 변경될 여지가 적은 경우

- 데이터 중복이 없으므로 데이터 update가 잦은 시스템

- 금융 및 은행 시스템

무결성과 일관성이 매우 중요

- ERP 시스템

재무,인사,생산,물류 등의 모듈이 복잡한 구조

RDB는 복잡한 구조를 표현하기에 적합

- CRM 시스템

Customer Relationship Management

고객 정보를 체계적으로 저장하고 관리하는 경우

인적 정보,구매 이력,서비스 내역 등

- 전자 상거래 플랫폼

데이터 일관성과 복잡한 관계 처리

**NoSQL**

- 정확한 데이터 구조가 정해지지 않은 경우

- update가 잦지 않고, 조회가 많은 경우

- 데이터 양이 매우 많은 경우

- 로그 관리 및 분석

실시간 로그 수집과 분석 
ElasticSearch를 이용한 빠른 검색

- 소셜 네트워크 및 메시징 시스템

사용자 활동이 빈번하고 데이터를 빠르게 처리하는 경우

- IoT 데이터 처리

IoT 기기에서 생성되는 비정형적이고 대량의 데이터


### 데이터와 Key

#### 데이터의 무결성이란 무엇인가요?
---

- 데이터의 정확성,일관성,신뢰성이 유지되는 속성

#### 무결성의 종류를 설명해주세요
---

**Key 관점**

- 개체 무결성(Entity Integrity)

테이블 각 행이 고유하게 식별되도록 보장하는 무결성

모든 테이블이 기본 키(Primary Key)로 선택된 필드를 가져야 함

기본 키 제약이라고도 함 

1. 기본 키에는 Null값이 올 수 없음
2. 기본 키는 테이블 내에 오직 하나의 값만 존재해야 함


- 키 무결성

하나의 릴레이션에 동일한 키 값을 가진 튜플 허용 불가

- 참조 무결성(Referential Integrity)

두 테이블 간의 관계가 유지되도록 보장하는 무결성

외래 키 제약이라고도 함

외래 키 값은 Null이거나 참조 릴레이션의 값과 동일해야 함 

주문 테이블에서 특정 고객 ID를 참조하는 경우, 고객 테이블에 해당 고객 ID가 반드시 존재해야한다. 

**Value 관점**

- 속성(도메인) 무결성(Domain Integrity)

데이터가 특정 필드나 컬럼에 유효한 값만 저장되도록 보장하는 무결성

각 속성이나 열(Column)의 값이 허용되는 범위를 제한하는 제약 조건

타입이나 Null 값 허용에 대한 사항을 정의

주민등록번호 필드에 알파벳이 입력되면 깨진다

**Business Rule 관점**

- 사용자 정의 무결성

다른 무결성 범주에 속하지 않는 특정 업무 규칙 정의 가능

모든 데이터는 업무 규칙을 준수

#### 무결성을 유지하기 위한 방법에는 어떤 것이 있을까요?
---

- 제약 조건 설정

기본 키,외래 키,도메인,체크 등 다양한 조건을 설정

- 트랜잭션

DB의 ACID 속성을 통해 무결성 유지

데이터 일관성 유지 

- 정규화

데이터 중복을 줄이고 일관성 유지 / 이상 현상 방지

- 트리거

특정 이벤트(INSERT,UPDATE)가 발생할때 자동으로 실행되는 프로시저

입력,수정,삭제 시 데이터 유효성 검사 수행 / 데이터 동기화 유지

- App 수준의 데이터 검증

DB에 데이터 입력 전에 앱 로직에서 데이터 검증

- 동시성 제어

동시성 문제로 인한 데이터 불일치 방지
락,낙관적 동시성 제어, 비관적 동시성 제어

#### 제약 조건은 무엇이며 어떻게 사용 가능한가요?
---

- 데이터베이스에서 데이터의 일관성과 무결성을 유지하기 위해 설정된 규칙

조건에 맞지 않는 데이터가 저장되지 않도록 강제

- 스키마를 정의할 때 일관성 조건을 오직 한번만 명시하고, 데이터베이스 갱신 시 DBMS가 자동적으로 일관성 조건을 검사

단, 프로그래밍 작업이 복잡해짐 / 무결성 제약조건을 반복해서 구현해야 함 / 무결성 제약조건 간 충돌이 발생 가능

**종류**

- NOT NULL 제약 조건

특정 열(Column)에 null 값을 허용하지 않도록 설정하는 것

해당 열에는 반드시 데이터가 존재해야 함

NOT NULL 제약 조건은 열의 정의에서 설정

- PRIMARY KEY 제약 조건

특정 열의 값을 고유하게 식별할 수 있도록 설정하는 것

CREATE TABLE 문에서 열을 정의할 때 설정

- FOREIGN KEY 제약 조건

다른 테이블의 PRIMARY KEY 열과 관련된 테이블에서 열을 참조하는 것

- CHECK 제약 조건

데이터의 값이 특정 조건에 부합하는지 확인

- UNIQUE 제약 조건

특정 열의 값이 고유하게 식별될 수 있도록 설정

- 사용법

테이블 생성 시 추가 -

```
CREATE TABLE students{
	student_id INT PRIMARY KEY,
    name VARCHAR(50) NOT NULL,
    age INT CHECK(age >= 18),
    email VARCHAR(100) UNIQUE
}
```

테이블 생성 후 추가 -
```
ALTER TABLE students ADD CONSTRAINTS chk_age CHECK (age >= 18)
```

제약조건 제거 -
```
ALTER TABLE students DROP CONSTRAINTS chk_age
```

#### Key(기본키,후보키,슈퍼키,...)에 대해 설명해 주세요.
---

- 테이블에서 각 행(tuple)을 고유하게 식별하거나, 테이블 간의 관계를 정의하기 위해 사용되는 속성 또는 속성들의 집합

#### Key의 목적은 무엇인가요?
---

- 고유 식별

테이블 각 행을 유일하게 식별 
중복 데이터 방지 / 검색 속도

- 무결성 유지

데이터의 정확성과 일관성 유지 
중복 입력, 불일치 방지

- 테이블 간 관계 정의

참조 무결성 보장

#### 유일성과 최소성은 무엇인가요?
---

- 유일성

하나의 키 값으로 tuple(행)을 유일하게 식별할 수 있는 성질

- 최소성

키를 구성하는 속성들 중 꼭 필요한 최소한의 속성들로만 키를 구성하는 성질

![](https://velog.velcdn.com/images/sujipark2009/post/59cf289c-0024-41ad-844a-0d1eb9e3e474/image.png)

#### 슈퍼키가 무엇인가요?
---

- 각 레코드를 고유하게 식별할 수 있는 속성

**특징**

- 유일성 O
- 최소성 X
- 기본키와 후보키를 포함
- (학번,이름)

#### 후보키가 무엇인가요?
---

- 슈퍼키 중에서 최소성을 만족하는 키
- 레코드를 고유하게 식별하는 최소 속성 또는 집합

**특징**

- 유일성 + 최소성 -> NULL / 중복 값 불가
여러 후보 키 존재 가능

- 학번 또는 주민등록번호

#### 기본키가 무엇인가요?

- 후보키에서 선택된 키
- UNIQUE, NOT NULL 제약 조건 자동 적용

#### 기본키는 수정이 가능한가요?
---

가능.

일반적으로 데이터베이스의 관계를 방해할 가능성이 있기 때문에 권장하지 않음

기본 키를 변경하는 경우 기본 키에 대한 외래 키 참조도 업데이트되는지 확인해야 함

그렇게 하지 않으면 데이터 무결성 문제가 발생할 수 있음

#### 대체키가 무엇인가요?
---

- 후보키 중에서 기본키로 선택되지 않은 키

#### 외래키가 무엇인가요?
---

- 어떤 테이블 간의 기본 키를 참조하는 속성

두 테이블 간의 참조 무결성 유지

값이 NULL이거나 참조하는 기본키 값과 일치

수강 테이블에서 학생 테이블의 기본키 '학번'을 참조하는 '학번' 속성

#### 외래키값에 NULL이 들어갈 수 있나요?
---

외래 키 값은 NULL일 수 있음

- 외래키의 NULL값은 이 테이블의 행과 참조된 테이블의 행 사이에 관계가 없음을 나타냄

- NOT NULL 제약 걸기 가능

- ON DELETE SET NULL -> 참조 행이 삭제될 때 NULL로 설정하도록 정의

#### MySQL에서 기본키를 설정하지 않아도 테이블이 만들어지는데, 이게 어떻게 가능할까요?
---

- 기본키는 무결성을 유지하기 위한 수단으로, 선택적 제약조건이다

DB가 무결성 보장을 강제하지 않는다

단점

- 성능 및 무결성에 영향을 미침
행 식별 불가

- MySQL은 자동으로 숨겨진 Row ID를 생성

이를 클러스터링 인덱스로 사용
기본키가 있을 때보다 행이 더 생김

#### 어떤 칼럼의 정의에 UNIQUE 키워드가 붙는다고 생각했을 때, 이 칼럼을 활용한 쿼리의 성능은 그렇지 않은 것과 비교하여 어떻게 다를까요?
---

- 열이 UNIQUE 키워드로 정의되면 데이터베이스 관리 시스템은 암시적으로 해당 열에 대한 고유 인덱스를 생성

이 열을 필터링하거나 정렬하는 모든 쿼리는 잠재적으로 인덱스의 이점을 얻을 수 있으므로 작업속도가 빨라짐

- 인덱스가 너무 많으면 인덱스도 업데이트 해야 하므로, 쓰기 작업이 느려질 수 있음